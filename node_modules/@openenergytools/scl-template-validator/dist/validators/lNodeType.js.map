{"version":3,"file":"lNodeType.js","sources":["../../../../../../node_modules/@openenergytools/scl-template-validator/dist/validators/lNodeType.js"],"sourcesContent":["/* eslint-disable no-promise-executor-return */\nimport { getAdjacentClass, iec6185074, validateChildren, } from \"../foundation.js\";\nasync function getMandatoryDataObject(base) {\n    const lnodeclasses = getAdjacentClass(await iec6185074, base);\n    return lnodeclasses.flatMap((lnodeclass) => Array.from(lnodeclass.querySelectorAll('DataObject[presCond=\"M\"]')));\n}\nasync function missingMandatoryChildren(lNodeType, lnClass) {\n    const errors = [];\n    const mandatoryDOs = await (await getMandatoryDataObject(lnClass)).map((DO) => DO.getAttribute(\"name\"));\n    mandatoryDOs.forEach((mandatoryDO) => {\n        if (!lNodeType.querySelector(`DO[name=\"${mandatoryDO}\"]`))\n            errors.push({\n                title: `The mandatory data object ${mandatoryDO} is missing`,\n                message: `${lNodeType.getAttribute(\"id\")}(${lnClass}) > ${mandatoryDO}`,\n            });\n    });\n    return errors;\n}\nexport async function lNodeTypeValidator(element) {\n    const errors = [];\n    const lnClass = element.getAttribute(\"lnClass\");\n    if (!lnClass)\n        return [\n            {\n                title: `Missing mandatory attribute lnClass`,\n                message: `${element.getAttribute(\"id\")}(${lnClass})`,\n            },\n        ];\n    const missingChildren = await missingMandatoryChildren(element, lnClass);\n    const issuesChildren = await validateChildren(element);\n    return errors.concat(missingChildren, issuesChildren);\n}\n//# sourceMappingURL=lNodeType.js.map"],"names":[],"mappings":";;AAAA;AAEA,eAAe,sBAAsB,CAAC,IAAI,EAAE;AAC5C,IAAI,MAAM,YAAY,GAAG,gBAAgB,CAAC,MAAM,UAAU,EAAE,IAAI,CAAC,CAAC;AAClE,IAAI,OAAO,YAAY,CAAC,OAAO,CAAC,CAAC,UAAU,KAAK,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;AACrH,CAAC;AACD,eAAe,wBAAwB,CAAC,SAAS,EAAE,OAAO,EAAE;AAC5D,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;AACtB,IAAI,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,sBAAsB,CAAC,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC;AAC5G,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC,WAAW,KAAK;AAC1C,QAAQ,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,SAAS,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;AACjE,YAAY,MAAM,CAAC,IAAI,CAAC;AACxB,gBAAgB,KAAK,EAAE,CAAC,0BAA0B,EAAE,WAAW,CAAC,WAAW,CAAC;AAC5E,gBAAgB,OAAO,EAAE,CAAC,EAAE,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;AACvF,aAAa,CAAC,CAAC;AACf,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,MAAM,CAAC;AAClB,CAAC;AACM,eAAe,kBAAkB,CAAC,OAAO,EAAE;AAClD,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;AACtB,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;AACpD,IAAI,IAAI,CAAC,OAAO;AAChB,QAAQ,OAAO;AACf,YAAY;AACZ,gBAAgB,KAAK,EAAE,CAAC,mCAAmC,CAAC;AAC5D,gBAAgB,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;AACpE,aAAa;AACb,SAAS,CAAC;AACV,IAAI,MAAM,eAAe,GAAG,MAAM,wBAAwB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC7E,IAAI,MAAM,cAAc,GAAG,MAAM,gBAAgB,CAAC,OAAO,CAAC,CAAC;AAC3D,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;AAC1D;;;;"}