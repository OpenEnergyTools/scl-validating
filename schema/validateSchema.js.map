{"version":3,"file":"validateSchema.js","sourceRoot":"","sources":["../../schema/validateSchema.ts"],"names":[],"mappings":"AAAA,sDAAsD;AACtD,OAAO,EAAE,QAAQ,EAAS,MAAM,uCAAuC,CAAC;AACxE,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAC;AAEzC,MAAM,CAAC,KAAK,UAAU,cAAc,CAClC,GAAgB,EAChB,OAAe;;IAEf,IAAI,OAAO,GAAG,MAAM,CAAC;IACrB,IAAI,QAAQ,GAAG,GAAG,CAAC;IACnB,IAAI,OAAO,GAAG,GAAG,CAAC;IAElB,IAAI,GAAG,CAAC,eAAe;QACrB,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC,GAAG;YAC7B,MAAA,GAAG,CAAC,eAAe,CAAC,YAAY,CAAC,SAAS,CAAC,mCAAI,EAAE;YACjD,MAAA,GAAG,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,mCAAI,EAAE;YAClD,MAAA,GAAG,CAAC,eAAe,CAAC,YAAY,CAAC,SAAS,CAAC,mCAAI,EAAE;SAClD,CAAC;IAEJ,OAAO,QAAQ,CACb;QACE,OAAO,EAAE,IAAI,aAAa,EAAE,CAAC,iBAAiB,CAAC,GAAG,CAAC;QACnD,IAAI,EAAE,OAAO;KACd,EACD;QACE,OAAO,EAAE,SAAS,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;QAC9C,IAAI,EAAE,MAAM,OAAO,GAAG,QAAQ,GAAG,OAAO,MAAM;KAC/C,CACF,CAAC;AACJ,CAAC","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport { validate, Issue } from '@openenergytools/xml-schema-validator';\nimport { getSchema } from './schemas.js';\n\nexport async function validateSchema(\n  doc: XMLDocument,\n  docName: string\n): Promise<Issue[] | null> {\n  let version = '2007';\n  let revision = 'B';\n  let release = '1';\n\n  if (doc.documentElement)\n    [version, revision, release] = [\n      doc.documentElement.getAttribute('version') ?? '',\n      doc.documentElement.getAttribute('revision') ?? '',\n      doc.documentElement.getAttribute('release') ?? '',\n    ];\n\n  return validate(\n    {\n      content: new XMLSerializer().serializeToString(doc),\n      name: docName,\n    },\n    {\n      content: getSchema(version, revision, release),\n      name: `SCL${version}${revision}${release}.xsd`,\n    }\n  );\n}\n"]}